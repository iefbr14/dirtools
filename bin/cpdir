#!/bin/sh
#
# $Id: cpdir 1.0 2002/03/17 17:06:59 drew Exp drew $
# $Source: /u/src/ss/watchdog/src/xxdir/cpdir $

if [ $# -ne 2 ] ; then
	echo "usage: cpdir {source} {target}"
	echo " -- copies the {source} directory to the {target} directory"
	exit 1
fi
if [ ! -d "$1" ] ; then
	echo "$0: source directory '$1' doesn't exists"
	exit 2
fi
if [ ! -d "$2" ] ; then
	if mkdir "$2" ; then
		echo "$0: Created $2"
	else
		exit 1
	fi
fi

umask 0

(cd "$1" && exec tar --one-file-system -Scf - . ) | (cd "$2" && exec tar -xpf - )
